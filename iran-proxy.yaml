# port of HTTP
port: 7890

# port of SOCKS5
socks-port: 7891

# (HTTP and SOCKS5 in one port)
# mixed-port: 7890

# redir port for Linux and macOS
# redir-port: 7892

allow-lan: false
mode: rule
log-level: debug
external-controller: 127.0.0.1:9090

proxy-groups:
  - name: Global choice
    type: select
    proxies:
      - Delayed minimum
      - Select node
      - Failed switch
      - Load balancing
  - name: Select node
    type: select
    use:
      - us
      - gb
      - de
  - name: Delayed minimum
    type: url-test
    use:
      - us
    url: 'http://www.gstatic.com/generate_204'
    interval: 300
  - name: Load balancing
    type: load-balance
    use:
      - us
    url: 'http://www.gstatic.com/generate_204'
    interval: 300
  - name: Failed switch
    type: fallback
    use:
      - us
    url: 'http://www.gstatic.com/generate_204'
    interval: 300

proxy-providers:
  us:
    type: http
    url: http://www.gstatic.com/generate_204
    interval: 300
    proxies:
    - {"name":"ðŸ‡ºðŸ‡¸US_209 | sspool","server":"107.181.161.163","type":"trojan","country":"ðŸ‡ºðŸ‡¸US","port":443,"password":"d1478689-439c-4590-b7ce-36e786a02dc3","skip-cert-verify":true,"udp":true}
    - {"name":"ðŸ‡ºðŸ‡¸US_222 | sspool","server":"youtube-bai-piao-wang-zhe-usa.98848.xyz","type":"trojan","country":"ðŸ‡ºðŸ‡¸US","port":443,"password":"d1478689-439c-4590-b7ce-36e786a02dc3","skip-cert-verify":true,"udp":true}
    - {"name":"ðŸ‡ºðŸ‡¸US_210 | sspool","server":"www.sxsy88.tk","type":"trojan","country":"ðŸ‡ºðŸ‡¸US","port":44150,"password":"zFyLKH62WN","skip-cert-verify":true,"udp":true}
    - {"name":"ðŸ‡ºðŸ‡¸US_216 | sspool","server":"150.230.217.213","type":"trojan","country":"ðŸ‡ºðŸ‡¸US","port":443,"password":"c09eb137-bf68-4658-84e0-102d94b74168","skip-cert-verify":true,"udp":true}
    - {"name":"ðŸ‡ºðŸ‡¸US_164 | sspool","server":"38.68.135.18","type":"ss","country":"ðŸ‡ºðŸ‡¸US","port":5500,"password":"KixLvKzwjekG00rm","cipher":"aes-256-gcm"}
    - {"name":"ðŸ‡ºðŸ‡¸US_190 | sspool","server":"23.230.146.254","type":"vmess","country":"ðŸ‡ºðŸ‡¸US","port":1258,"uuid":"edeb41cc-a76a-47f2-fa96-b9141e66a2b0","alterId":0,"cipher":"auto","network":"tcp","ws-path":"/","http-opts":{},"h2-opts":{},"skip-cert-verify":true}
    - {"name":"ðŸ‡ºðŸ‡¸US_192 | sspool","server":"67.21.72.44","type":"vmess","country":"ðŸ‡ºðŸ‡¸US","port":443,"uuid":"2566d00f-218c-48f7-9a36-13d3d6f1a724","alterId":64,"cipher":"auto","network":"ws","ws-path":"/path/120208301422","servername":"www.48816626.xyz","ws-headers":{"HOST":"www.48816626.xyz"},"http-opts":{},"h2-opts":{},"tls":true,"skip-cert-verify":true}
    - {"name":"ðŸ‡ºðŸ‡¸US_153 | sspool","server":"38.64.138.145","type":"ss","country":"ðŸ‡ºðŸ‡¸US","port":8080,"password":"KixLvKzwjekG00rm","cipher":"aes-256-gcm"}
    - {"name":"ðŸ‡ºðŸ‡¸US_144 | sspool","server":"38.114.114.69","type":"ss","country":"ðŸ‡ºðŸ‡¸US","port":443,"password":"pKEW8JPByTVTLtM","cipher":"aes-256-gcm"}
    - {"name":"ðŸ‡ºðŸ‡¸US_158 | sspool","server":"38.121.43.71","type":"ss","country":"ðŸ‡ºðŸ‡¸US","port":8119,"password":"cdBIDV42DCwnfIN","cipher":"aes-256-gcm"}
    - {"name":"ðŸ‡ºðŸ‡¸US_178 | sspool","server":"38.75.136.21","type":"ss","country":"ðŸ‡ºðŸ‡¸US","port":8080,"password":"KixLvKzwjekG00rm","cipher":"aes-256-gcm"}
    - {"name":"ðŸ‡ºðŸ‡¸US_164 | sspool","server":"38.68.135.18","type":"ss","country":"ðŸ‡ºðŸ‡¸US","port":5500,"password":"KixLvKzwjekG00rm","cipher":"aes-256-gcm"}
    - {"name":"ðŸ‡ºðŸ‡¸US_186 | sspool","server":"38.68.135.19","type":"ss","country":"ðŸ‡ºðŸ‡¸US","port":2376,"password":"faBAoD54k87UJG7","cipher":"aes-256-gcm"}
    - {"name":"ðŸ‡ºðŸ‡¸US_182 | sspool","server":"38.64.138.145","type":"ss","country":"ðŸ‡ºðŸ‡¸US","port":6679,"password":"TEzjfAYq2IjtuoS","cipher":"aes-256-gcm"}

  de:
    type: http
    interval: 300
    url: http://www.gstatic.com/generate_204
    proxies:
    - {"name":"ðŸ‡©ðŸ‡ªDE_72 | sspool","server":"193.108.117.75","type":"ss","country":"ðŸ‡©ðŸ‡ªDE","port":8090,"password":"PCnnH6SQSnfoS27","cipher":"aes-256-gcm"}
    - {"name":"ðŸ‡©ðŸ‡ªDE_69 | sspool","server":"193.108.117.75","type":"ss","country":"ðŸ‡©ðŸ‡ªDE","port":2376,"password":"faBAoD54k87UJG7","cipher":"aes-256-gcm"}
  gb:
    type: http
    interval: 300
    url: http://www.gstatic.com/generate_204
    proxies:

rule-providers:
  iran:
    type: http
    behavior: classical
    url: "https://github.com/SamadiPour/iran-hosted-domains/releases/latest/download/clash_rules.yaml"
    path: ./ruleset/iran.yaml
    interval: 432000

rules:
  - RULE-SET,iran,DIRECT
  - DOMAIN,didi.ir,DIRECT
  - DOMAIN,ad.com,REJECT
  - DOMAIN,whatsapp.com,DIRECT
  - DOMAIN,meet.google.com,DIRECT
  - DOMAIN,web.whatsapp.com,DIRECT
  - SRC-IP-CIDR,192.168.1.201/32,DIRECT
  - IP-CIDR,127.0.0.0/8,DIRECT
  - IP-CIDR6,2620:0:2d0:200::7/32,DIRECT
  - DST-PORT,80,DIRECT
  - SRC-PORT,7777,DIRECT
  - MATCH,Global choice
